<!DOCTYPE html>
<html>

<head>
    <title>@PERSO</title>
    <meta charset="utf-8" />
    <link href="style/StyleSheet.css" rel="stylesheet" />
    <script src="scripts/data.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/kendo.all.min.js"></script>
    <link rel="stylesheet" href="http://kendo.cdn.telerik.com/2019.2.619/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="http://kendo.cdn.telerik.com/2019.2.619/styles/kendo.blueopal.min.css" />
    <link rel="stylesheet" href="styles/kendo.common.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.min.css" />
    <link rel="stylesheet" href="styles/kendo.default.mobile.min.css" />

    <link href="https://fonts.googleapis.com/css?family=Racing+Sans+One&display=swap" rel="stylesheet">
    <link rel="icon" href="img/icons8-search-more-80.png" type="image/x-icon" />





</head>

<body>



    <div class="header" style="background-image:url(img/perso.jpeg)">
        <h1>&copy;PERSO</h1>

    </div>


    <div class="grid-container">

        <div class="search-field">
            <input type="text" class="data-search" placeholder="Search..." />
        </div>

        <div id="grid">

        </div>
    </div>


    <div class="footer" style="background-image: url('img/footer.jpg" )>

    </div>



    <script>
        $(function() {
            $("#grid").kendoGrid({
                    dataSource: {
                        data: Persons
                    },
                    pageable: {
                        pageSize: 20
                    },
                    filterable: true,
                    scrollable: false,
                    groupable: true,
                    sortable: true,
                    columns: [{
                            title: "Identifier",
                            field: "ID",
                            template: "<span class='bubble'>#=ID#</span>"
                        },

                        {
                            title: "Organization",
                            field: "Organization"
                        },
                        {
                            title: "Full Name",
                            field: "DisplayName",
                            template: "<span><img src='img/man.jpg' class='profile-img'/></span> #=DisplayName#",
                        },
                        {
                            title: "E-mail",
                            field: "EMail",
                            template: "<a href='mailto:#= EMail #'>#=EMail#</a>"
                        },
                        {
                            title: "Phone",
                            field: "Phone"
                        },
                        {
                            title: "User Name",
                            field: "UserName"

                        },
                        {
                            title: "Status",
                            field: "Status",
                            template: "<span class='stat-dot'></span> #=Status#"
                        }
                    ],
                    toolbar: [{
                        template: kendo.template($(".search-field").html())
                    }],



                }).data("kendoGrid"),
                $("body").on("keyup", ".data-search", function() {
                    var val = $(".data-search").val();
                    $("#grid").data("kendoGrid").dataSource.filter({
                        logic: "or",
                        filters: [{
                                field: "ID",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "Organization",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "DisplayName",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "EMail",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "Phone",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "UserName",
                                operator: "contains",
                                value: val
                            },
                            {
                                field: "Status",
                                operator: "contains",
                                value: val
                            }
                        ]
                    });
                
                });




            $('tr[role="row"]').each(function() {
                const lastCell = $(this).children('td:last-child');
                const text = lastCell.text();
                const isActive = text.includes('Open');
                const statDot = lastCell.children('.stat-dot');

                if (isActive) {
                    statDot.addClass('bg-active').removeClass('bg-inactive');
                } else {
                    statDot.addClass('bg-inactive').removeClass('bg-active');
                }

                });
            
             });

            
       
    </script>

</body>

</html>
